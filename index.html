<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Receta Meta Ads 2026 - Soy Brillante</title>

  <!-- =========================================================
       DEPENDENCIAS
       - React/ReactDOM: UI
       - Babel: permite JSX directo en navegador (modo demo)
       - Tailwind: estilos r√°pidos
  ========================================================== -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel para JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- =========================================================
       CONFIG TAILWIND
       - Tipograf√≠as
       - Animaciones custom (spin lento, bounce lento, fade-in)
  ========================================================== -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ["Segoe UI", "Roboto", "Helvetica Neue", "Arial", "sans-serif"],
            display: ["Georgia", "serif"],
          },
          animation: {
            "spin-slow": "spin 8s linear infinite",
            "bounce-slow": "bounce 3s infinite",
            "fade-in": "fadeIn 0.5s ease-out",
            "fade-in-up": "fadeInUp 0.8s ease-out forwards",
          },
          keyframes: {
            fadeIn: {
              "0%": { opacity: "0" },
              "100%": { opacity: "1" },
            },
            fadeInUp: {
              "0%": { opacity: "0", transform: "translateY(20px)" },
              "100%": { opacity: "1", transform: "translateY(0)" },
            },
          },
        },
      },
    };
  </script>

  <style>
    /* Estilos base */
    body { margin: 0; padding: 0; }
    .font-display { font-family: "Georgia", serif; }
  </style>
</head>

<body>
  <!-- Root donde React monta la app -->
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    /* =========================================================
       ICONOS SVG (sin librer√≠as externas)
       - IconBase: wrapper com√∫n
       - Iconos: componentes peque√±os reusables
    ========================================================== */
    const IconBase = ({ children, className, ...props }) => (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24" height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
        className={className}
        {...props}
      >
        {children}
      </svg>
    );

    const Utensils = (props) => (
      <IconBase {...props}>
        <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" />
        <path d="M7 2v20" />
        <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" />
      </IconBase>
    );

    const ShieldCheck = (props) => (
      <IconBase {...props}>
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" />
        <path d="m9 12 2 2 4-4" />
      </IconBase>
    );

    const Flame = (props) => (
      <IconBase {...props}>
        <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.2.6-3.3.037.19.1.373.18.552.17.38.45.72.82 1.048Z" />
      </IconBase>
    );

    const LayoutGrid = (props) => (
      <IconBase {...props}>
        <rect width="7" height="7" x="3" y="3" rx="1" />
        <rect width="7" height="7" x="14" y="3" rx="1" />
        <rect width="7" height="7" x="14" y="14" rx="1" />
        <rect width="7" height="7" x="3" y="14" rx="1" />
      </IconBase>
    );

    const LinkIcon = (props) => (
      <IconBase {...props}>
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
      </IconBase>
    );

    const Globe = (props) => (
      <IconBase {...props}>
        <circle cx="12" cy="12" r="10" />
        <line x1="2" x2="22" y1="12" y2="12" />
        <path d="a15.3 15.3 0 0 1 4-10 15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10" />
      </IconBase>
    );

    const TestTube2 = (props) => (
      <IconBase {...props}>
        <path d="M21 7 7 21" />
        <path d="M18 10l-1.5-1.5" />
        <path d="M15 13l-1.5-1.5" />
        <path d="M12 16l-1.5-1.5" />
        <path d="M9 19l-1.5-1.5" />
        <path d="M18 4h3" />
        <path d="M16 2l6 6" />
        <path d="M2 16l6 6" />
      </IconBase>
    );

    const ChefHat = (props) => (
      <IconBase {...props}>
        <path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z" />
        <line x1="6" x2="18" y1="17" y2="17" />
      </IconBase>
    );

    const CheckCircle2 = (props) => (
      <IconBase {...props}>
        <circle cx="12" cy="12" r="10" />
        <path d="m9 12 2 2 4-4" />
      </IconBase>
    );

    const ChevronDown = (props) => (
      <IconBase {...props}>
        <path d="m6 9 6 6 6-6" />
      </IconBase>
    );

    const ChevronUp = (props) => (
      <IconBase {...props}>
        <path d="m18 15-6-6-6 6" />
      </IconBase>
    );

    const PartyPopper = (props) => (
      <IconBase {...props}>
        <path d="M5.8 11.3 2 22l10.7-3.79" />
        <path d="M4 3h.01" />
        <path d="M22 8h.01" />
        <path d="M15 2h.01" />
        <path d="M22 20h.01" />
        <path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10" />
        <path d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17" />
        <path d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7" />
      </IconBase>
    );

    /* =========================================================
       DATOS (ETAPAS Y TAREAS)
       - Cada etapa tiene:
         id, title, subtitle, icon, color, tasks[]
       - Cada task tiene:
         id, text
    ========================================================== */
    const STEPS = [
      {
        id: "mise-en-place",
        title: "Mise en place",
        subtitle: "Ingredientes antes de prender la estufa",
        icon: <Utensils className="w-6 h-6 text-orange-500" />,
        color: "bg-orange-100 border-orange-200 text-orange-800",
        tasks: [
          { id: "m1", text: "Acceso Admin al Business Portfolio de Aurana" },
          { id: "m2", text: "Acceso Admin a Shopify de Soy Brillante" },
          { id: "m3", text: "Tarjeta con fondos ($300 USD) lista" },
          { id: "m4", text: "10 minutos de paz mental" },
        ],
      },
      {
        id: "step-1",
        title: "Paso 1: Lava Manos",
        subtitle: "Seguridad y control (10 min)",
        icon: <ShieldCheck className="w-6 h-6 text-blue-500" />,
        color: "bg-blue-50 border-blue-200 text-blue-800",
        tasks: [
          { id: "s1-1", text: "Activa 2FA en tu perfil y admins" },
          { id: "s1-2", text: "Agrega un 2do admin de respaldo" },
          { id: "s1-3", text: "Elimina usuarios/partners desconocidos" },
        ],
      },
      {
        id: "step-2",
        title: "Paso 2: Apaga el Incendio",
        subtitle: "Liquida la deuda (5-10 min)",
        icon: <Flame className="w-6 h-6 text-red-500" />,
        color: "bg-red-50 border-red-200 text-red-800",
        tasks: [
          { id: "s2-1", text: "Ir a Billing & Payments en Meta" },
          { id: "s2-2", text: "Liquidar balance de Aurana ($300 USD)" },
          { id: "s2-3", text: "Configurar m√©todo de pago principal v√°lido" },
        ],
      },
      {
        id: "step-3",
        title: "Paso 3: Base Nueva",
        subtitle: "Crea assets limpios (15-25 min)",
        icon: <LayoutGrid className="w-6 h-6 text-purple-500" />,
        color: "bg-purple-50 border-purple-200 text-purple-800",
        tasks: [
          { id: "s3-1", text: 'Crear Ad Account: "SB - Ads - 2026"' },
          { id: "s3-2", text: "Configurar Moneda y Zona Horaria correctamente" },
          { id: "s3-3", text: 'Crear Dataset/Pixel: "SB - Pixel - 2026"' },
          { id: "s3-4", text: "Asociar Pixel al Ad Account nuevo" },
        ],
      },
      {
        id: "step-4",
        title: "Paso 4: Conexi√≥n Perfecta",
        subtitle: "Shopify + Meta (20-40 min)",
        icon: <LinkIcon className="w-6 h-6 text-green-500" />,
        color: "bg-green-50 border-green-200 text-green-800",
        tasks: [
          { id: "s4-1", text: 'Instalar canal "Facebook & Instagram" en Shopify' },
          { id: "s4-2", text: 'Conectar al Ad Account y Pixel "2026"' },
          { id: "s4-3", text: 'Activar Data Sharing en "Maximum" (CAPI)' },
          { id: "s4-4", text: "Verificar que NO haya pixeles pegados a mano en theme" },
        ],
      },
      {
        id: "step-5",
        title: "Paso 5: Control Sanitario",
        subtitle: "Dominios y Permisos (15-30 min)",
        icon: <Globe className="w-6 h-6 text-cyan-500" />,
        color: "bg-cyan-50 border-cyan-200 text-cyan-800",
        tasks: [
          { id: "s5-1", text: "Verificar dominio soybrillantemx.com en Meta" },
          { id: "s5-2", text: "Configurar Traffic Permissions (Allow list) en Pixel" },
        ],
      },
      {
        id: "step-6",
        title: "Paso 6: Prueba de Sabor",
        subtitle: "Test de eventos final (10-15 min)",
        icon: <TestTube2 className="w-6 h-6 text-pink-500" />,
        color: "bg-pink-50 border-pink-200 text-pink-800",
        tasks: [
          { id: "s6-1", text: "Abrir Test Events en Events Manager" },
          { id: "s6-2", text: "Simular compra en modo inc√≥gnito" },
          { id: "s6-3", text: "Confirmar eventos Browser + Server recibidos" },
        ],
      },
    ];

    /* =========================================================
       CLAVES DE LOCALSTORAGE
       - progress: arreglo de taskIds marcadas como completadas
       - notes: objeto { [taskId]: "texto..." }
    ========================================================== */
    const LS_PROGRESS_KEY = "meta-recipe-progress";
    const LS_NOTES_KEY = "meta-recipe-notes";

    /* =========================================================
       COMPONENTE PRINCIPAL
       - Maneja:
         1) Progreso (checklist)
         2) Notas por tarea (textarea)
         3) Expansi√≥n por etapa (accordion)
         4) Persistencia en localStorage
    ========================================================== */
    function CookingApp() {
      // Progreso: lista de taskIds completadas
      const [completed, setCompleted] = useState(() => {
        try {
          const saved = localStorage.getItem(LS_PROGRESS_KEY);
          return saved ? JSON.parse(saved) : [];
        } catch (e) {
          return [];
        }
      });

      // Notas: { [taskId]: "..." }
      const [notes, setNotes] = useState(() => {
        try {
          const saved = localStorage.getItem(LS_NOTES_KEY);
          return saved ? JSON.parse(saved) : {};
        } catch (e) {
          return {};
        }
      });

      // Qu√© etapa est√° expandida
      const [expandedStep, setExpandedStep] = useState(STEPS[0].id);

      // Confetti ‚Äúconceptual‚Äù (aqu√≠ solo activa el badge final)
      const [showConfetti, setShowConfetti] = useState(false);

      // Total de tareas (para porcentaje)
      const totalTasks = useMemo(
        () => STEPS.reduce((acc, step) => acc + step.tasks.length, 0),
        []
      );

      // Porcentaje de avance
      const progressPercentage = Math.round((completed.length / totalTasks) * 100);

      /* =========================================================
         Persistencia:
         - Cada cambio en completed => guarda progress
         - Cada cambio en notes => guarda notes
      ========================================================== */
      useEffect(() => {
        localStorage.setItem(LS_PROGRESS_KEY, JSON.stringify(completed));
      }, [completed]);

      useEffect(() => {
        localStorage.setItem(LS_NOTES_KEY, JSON.stringify(notes));
      }, [notes]);

      /* =========================================================
         Toggle checklist
         - Marca/desmarca una tarea
         - Si completas todas => showConfetti=true
      ========================================================== */
      const toggleTask = (taskId) => {
        setCompleted((prev) => {
          if (prev.includes(taskId)) {
            return prev.filter((id) => id !== taskId);
          } else {
            const newCompleted = [...prev, taskId];
            if (newCompleted.length === totalTasks) {
              setShowConfetti(true);
            }
            return newCompleted;
          }
        });
      };

      /* =========================================================
         Notas por tarea (hist√≥rico)
         - Actualiza notes[taskId] en tiempo real
      ========================================================== */
      const updateNote = (taskId, value) => {
        setNotes((prev) => ({
          ...prev,
          [taskId]: value,
        }));
      };

      /* =========================================================
         ‚ÄúEtapa de cocci√≥n‚Äù seg√∫n porcentaje
      ========================================================== */
      const getCookingStage = () => {
        if (progressPercentage === 0) return { emoji: "ü•£", text: "Olla Vac√≠a", desc: "¬°A juntar ingredientes!" };
        if (progressPercentage < 20) return { emoji: "üî™", text: "Picando", desc: "Mise en place listo..." };
        if (progressPercentage < 40) return { emoji: "üî•", text: "Prendiendo Fuego", desc: "La sart√©n se calienta" };
        if (progressPercentage < 60) return { emoji: "ü•ò", text: "Cocinando", desc: "Huele a √©xito..." };
        if (progressPercentage < 80) return { emoji: "üßÇ", text: "Sazonando", desc: "Casi listo para servir" };
        if (progressPercentage < 100) return { emoji: "üçΩÔ∏è", text: "Emplatando", desc: "√öltimos detalles" };
        return { emoji: "üåü", text: "¬°Chef Estrella!", desc: "¬°Receta completada!" };
      };

      const stage = getCookingStage();

      /* =========================================================
         Helpers UI
      ========================================================== */
      const isStepComplete = (step) => step.tasks.every((t) => completed.includes(t.id));

      const resetAll = () => {
        setCompleted([]);
        setNotes({});
        localStorage.removeItem(LS_PROGRESS_KEY);
        localStorage.removeItem(LS_NOTES_KEY);
        setShowConfetti(false);
      };

      return (
        <div className="min-h-screen font-sans text-gray-800 pb-20 relative">
          {/* =====================================================
              FONDO FIJO
              - Imagen + overlay blanco semi-transparente
          ====================================================== */}
          <div className="fixed inset-0 z-[-1]">
            <img
              src="https://images.unsplash.com/photo-1574629173115-01ba95c5c089?q=80&w=1920&auto=format&fit=crop"
              alt="Cena Navide√±a Elegante"
              className="w-full h-full object-cover"
            />
            <div className="absolute inset-0 bg-white/70 backdrop-blur-[2px]"></div>
          </div>

          {/* =====================================================
              CONTENIDO
          ====================================================== */}
          <div className="relative z-10">
            {/* Header Sticky con progreso */}
            <div className="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md border-b-4 border-orange-200">
              <div className="max-w-3xl mx-auto px-4 py-3">
                <div className="flex items-center justify-between mb-2">
                  <h1 className="text-xl font-bold text-orange-600 flex items-center gap-2">
                    <ChefHat className="w-6 h-6" />
                    Receta Meta Ads 2026
                  </h1>
                  <span className="font-bold text-gray-600">{progressPercentage}% Listo</span>
                </div>

                <div className="w-full h-4 bg-gray-100 rounded-full overflow-hidden border border-gray-200">
                  <div
                    className="h-full bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 transition-all duration-500 ease-out flex items-center justify-end pr-1"
                    style={{ width: `${progressPercentage}%` }}
                  >
                    {progressPercentage > 0 && <div className="w-2 h-full bg-white/30 animate-pulse" />}
                  </div>
                </div>
              </div>
            </div>

            <div className="max-w-3xl mx-auto px-4 py-8">
              {/* Hero visual */}
              <div className="bg-white/90 backdrop-blur-sm rounded-3xl p-8 mb-8 shadow-xl border-b-8 border-orange-100 text-center transform hover:scale-[1.01] transition-transform duration-300 relative overflow-hidden">
                {progressPercentage === 100 && (
                  <div className="absolute inset-0 pointer-events-none flex justify-center items-center">
                    <div className="animate-spin-slow text-9xl opacity-20">‚ú®</div>
                  </div>
                )}

                <div className="text-8xl mb-4 animate-bounce-slow filter drop-shadow-lg">
                  {stage.emoji}
                </div>
                <h2 className="text-3xl font-black text-gray-800 mb-2 font-display">{stage.text}</h2>
                <p className="text-lg text-gray-500 font-medium">{stage.desc}</p>

                {progressPercentage === 100 && (
                  <div className="mt-6 p-4 bg-green-100 rounded-xl text-green-800 animate-fade-in-up">
                    <p className="font-bold text-xl flex items-center justify-center gap-2">
                      <PartyPopper /> ¬°Felicidades, Chef!
                    </p>
                    <p>Tu infraestructura de anuncios est√° lista y blindada para 2026.</p>
                  </div>
                )}
              </div>

              {/* =====================================================
                  LISTA DE ETAPAS (Accordion)
              ====================================================== */}
              <div className="space-y-4">
                {STEPS.map((step) => {
                  const isComplete = isStepComplete(step);
                  const isOpen = expandedStep === step.id;
                  const completedCount = step.tasks.filter((t) => completed.includes(t.id)).length;

                  return (
                    <div
                      key={step.id}
                      className={`
                        bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden transition-all duration-300 border-2
                        ${isComplete ? "border-green-400 bg-green-50/90 shadow-sm opacity-90" : "border-transparent shadow-lg"}
                        ${isOpen ? "ring-4 ring-orange-200/50" : ""}
                      `}
                    >
                      {/* Encabezado clickeable */}
                      <button
                        onClick={() => setExpandedStep(isOpen ? null : step.id)}
                        className={`w-full p-5 flex items-center justify-between text-left transition-colors ${step.color} bg-opacity-80 hover:bg-opacity-100`}
                      >
                        <div className="flex items-center gap-4">
                          <div
                            className={`
                              w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-sm
                              ${isComplete ? "text-green-500" : ""}
                            `}
                          >
                            {isComplete ? <CheckCircle2 className="w-6 h-6" /> : step.icon}
                          </div>
                          <div>
                            <h3 className={`font-bold text-lg leading-tight ${isComplete ? "line-through decoration-2 decoration-green-500 opacity-60" : ""}`}>
                              {step.title}
                            </h3>
                            <p className="text-sm opacity-80">{step.subtitle}</p>
                          </div>
                        </div>

                        <div className="flex items-center gap-3">
                          <span className="text-xs font-bold bg-white/50 px-2 py-1 rounded-lg">
                            {completedCount}/{step.tasks.length}
                          </span>
                          {isOpen ? <ChevronUp className="w-5 h-5 opacity-50" /> : <ChevronDown className="w-5 h-5 opacity-50" />}
                        </div>
                      </button>

                      {/* Contenido desplegable */}
                      {isOpen && (
                        <div className="p-4 bg-white/50 animate-fade-in">
                          <div className="space-y-3">
                            {step.tasks.map((task) => {
                              const isChecked = completed.includes(task.id);
                              const noteValue = notes?.[task.id] ?? "";

                              return (
                                <div
                                  key={task.id}
                                  className={`
                                    p-3 rounded-xl transition-all duration-200 border
                                    ${isChecked
                                      ? "bg-gray-50/80 border-gray-100 text-gray-500"
                                      : "bg-white border-gray-200 hover:border-orange-300 hover:shadow-md"}
                                  `}
                                >
                                  {/* L√≠nea principal: checkbox + texto */}
                                  <label className="flex items-start gap-3 cursor-pointer">
                                    <div className="relative flex-shrink-0 mt-0.5">
                                      <input
                                        type="checkbox"
                                        className="peer sr-only"
                                        checked={isChecked}
                                        onChange={() => toggleTask(task.id)}
                                      />
                                      <div
                                        className={`
                                          w-6 h-6 rounded-md border-2 transition-colors flex items-center justify-center
                                          ${isChecked ? "bg-green-500 border-green-500" : "border-gray-300 bg-white"}
                                        `}
                                      >
                                        {isChecked && <CheckCircle2 className="w-4 h-4 text-white" />}
                                      </div>
                                    </div>

                                    <span className={`text-base select-none transition-all ${isChecked ? "line-through opacity-70" : ""}`}>
                                      {task.text}
                                    </span>
                                  </label>

                                  {/* =================================================
                                      CUADRO DE NOTAS (HIST√ìRICO)
                                      - Uno por cada tarea (paso).
                                      - Persiste en localStorage.
                                  ================================================== */}
                                  <div className="mt-3">
                                    <div className="flex items-center justify-between mb-1">
                                      <p className="text-xs font-bold text-gray-600">
                                        Notas / hist√≥rico
                                      </p>
                                      <p className="text-[10px] text-gray-400">
                                        ID: {task.id}
                                      </p>
                                    </div>

                                    <textarea
                                      value={noteValue}
                                      onChange={(e) => updateNote(task.id, e.target.value)}
                                      placeholder="Escribe aqu√≠ lo que pas√≥: fecha, screenshots que tomaste, a qui√©n le pediste acceso, qu√© error sali√≥, qu√© resolviste, etc."
                                      className={`
                                        w-full min-h-[88px] resize-y rounded-xl border px-3 py-2 text-sm
                                        focus:outline-none focus:ring-2 focus:ring-orange-200
                                        ${isChecked ? "bg-gray-50 border-gray-200" : "bg-white border-gray-200"}
                                      `}
                                    />
                                  </div>
                                </div>
                              );
                            })}
                          </div>

                          {/* Mensajito de ‚Äúpaso completado‚Äù (etapa completa) */}
                          {completedCount === step.tasks.length && (
                            <div className="mt-4 text-center text-sm font-bold text-green-600 animate-bounce">
                              ¬°Etapa completada! Sigue as√≠ üî•
                            </div>
                          )}
                        </div>
                      )}
                    </div>
                  );
                })}
              </div>

              {/* Footer + Reset */}
              <div className="mt-12 text-center text-gray-500 text-sm pb-8 font-medium">
                <p className="bg-white/50 inline-block px-4 py-1 rounded-full">
                  Cocinado con ‚ù§Ô∏è por Soy Brillante
                </p>

                <div className="mt-2">
                  <button
                    onClick={() => {
                      if (confirm("¬øReiniciar toda la receta? (Esto borra progreso y notas)")) {
                        resetAll();
                      }
                    }}
                    className="text-xs text-red-400 hover:text-red-600 underline bg-white/50 px-2 py-1 rounded"
                  >
                    Reiniciar receta
                  </button>
                </div>
              </div>

            </div>
          </div>
        </div>
      );
    }

    // Montaje de React
    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<CookingApp />);
  </script>
</body>
</html>
